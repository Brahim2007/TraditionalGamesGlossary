# جدول نموذجي للبيانات - Traditional Games Glossary

هذا الجدول يوضح جميع الحقول في نموذج البيانات الرئيسي (Game) مع وصفها ونوعها وصيغ الاستيراد المناسبة لضمان دقة المعلومات.

## جدول الحقول الرئيسية لنموذج Game

| الترتيب | اسم الحقل (العربية) | اسم الحقل (الإنجليزية) | النوع | مطلوب؟ | الوصف | صيغة الاستيراد/التحقق |
|---------|---------------------|------------------------|-------|---------|--------|------------------------|
| 1 | المعرف الفريد | id | String (CUID) | نعم | معرف فريد تلقائي | `@default(cuid())` - يتم توليده تلقائياً |
| 2 | الاسم الأساسي | canonicalName | String (Text) | نعم | الاسم الرسمي للعبة بالعربية | يجب أن يكون نصاً غير فارغ، التحقق من الصيغة: `/.+/` |
| 3 | الأسماء المحلية | localNames | String[] | لا | مصفوفة من الأسماء البديلة | صيغة CSV: `"اسم1,اسم2,اسم3"` أو JSON array |
| 4 | الرابط الثابت | slug | String | نعم | رابط URL فريد للعبة | يجب أن يكون فريداً، صيغة: `/[a-z0-9-]+/` |
| 5 | معرف الدولة | countryId | String | نعم | معرف الدولة المرتبطة | يجب أن يكون موجوداً في جدول Country |
| 6 | الدولة | country | Relation | نعم | علاقة مع جدول الدول | يتم ربطه تلقائياً عبر countryId |
| 7 | المنطقة | region | String (Text) | لا | المنطقة داخل الدولة | نص حر، مثال: "الفرجان القديمة" |
| 8 | الإحداثيات الجغرافية | geoCoordinates | Json | لا | إحداثيات الموقع الجغرافي | صيغة JSON: `{"lat": 25.2854, "lng": 51.5310}` أو `{"x": 115, "y": 90}` |
| 9 | معرف مجال التراث | heritageFieldId | String | نعم | معرف مجال التراث (اليونسكو) | يجب أن يكون موجوداً في جدول HeritageField |
| 10 | مجال التراث | heritageField | Relation | نعم | علاقة مع جدول مجالات التراث | يتم ربطه تلقائياً عبر heritageFieldId |
| 11 | نوع اللعبة | gameType | String | نعم | تصنيف نوع اللعبة | قيم مقترحة: "حركية، ذهنية، طريفة، بحرية، شعبية" |
| 12 | الفئة العمرية | ageGroup | String (Text) | لا | الفئة العمرية المناسبة | نص حر، مثال: "9 - 12 سنة" |
| 13 | الممارسون | practitioners | String | لا | الجنس الذي يمارس اللعبة | قيم: "مختلط، ذكور، إناث" |
| 14 | عدد اللاعبين | playersCount | String | لا | عدد اللاعبين المطلوب | نص حر، مثال: "3 - 10 لاعبين" |
| 15 | الأدوات | tools | String[] | نعم | مصفوفة بالأدوات المستخدمة | صيغة CSV أو JSON array |
| 16 | البيئة | environment | String (Text) | لا | مكان ممارسة اللعبة | نص حر، مثال: "السكيك (الأزقة)" |
| 17 | التوقيت | timing | String (Text) | لا | وقت ممارسة اللعبة | نص حر، مثال: "النهار (العصر)" |
| 18 | الوصف | description | String (Text) | نعم | وصف تفصيلي للعبة | نص طويل، التحقق من الطول الأدنى: 100 حرف |
| 19 | القواعد | rules | String[] | نعم | مصفوفة بالقواعد التفصيلية | كل عنصر قاعدة منفصلة، صيغة JSON array |
| 20 | نظام الفوز/الخسارة | winLossSystem | String (Text) | لا | كيفية تحديد الفائز | نص حر يشرح نظام التسجيل |
| 21 | آلية البدء/الانتهاء | startEndMechanism | String (Text) | لا | كيفية بدء وإنهاء اللعبة | نص حر |
| 22 | التقليد الشفهي | oralTradition | String (Text) | لا | الأغاني أو الصيحات المصاحبة | نص حر |
| 23 | السياق الاجتماعي | socialContext | String (Text) | لا | الأبعاد الاجتماعية للعبة | نص حر |
| 24 | الوسائط | media | Relation[] | لا | علاقة مع جدول الوسائط | يتم إنشاؤها منفصلة |
| 25 | المراجع | references | Relation[] | لا | علاقة مع جدول المراجع | يتم إنشاؤها منفصلة |
| 26 | الوسوم | tags | Relation[] | لا | علاقة مع جدول الوسوم | يتم ربطها عبر جدول GameTag |
| 27 | حالة المراجعة | reviewStatus | Enum | نعم | حالة مراجعة اللعبة | قيم: draft, under_review, published, rejected, archived |
| 28 | تاريخ الإنشاء | createdAt | DateTime | نعم | تاريخ إنشاء السجل | `@default(now())` - تلقائي |
| 29 | تاريخ التحديث | updatedAt | DateTime | نعم | تاريخ آخر تحديث | `@updatedAt` - تلقائي |
| 30 | تاريخ النشر | publishedAt | DateTime | لا | تاريخ نشر اللعبة | يتم تعيينه عند النشر |
| 31 | معرف المساهم | contributorId | String | لا | معرف الشخص الذي أضاف اللعبة | يجب أن يكون موجوداً في جدول Contributor |
| 32 | المساهم | contributor | Relation | لا | علاقة مع جدول المساهمين | يتم ربطه تلقائياً |
| 33 | معرف المراجع | reviewerId | String | لا | معرف الشخص الذي راجع اللعبة | يجب أن يكون موجوداً في جدول Contributor |
| 34 | المراجع | reviewer | Relation | لا | علاقة مع جدول المراجعين | يتم ربطه تلقائياً |
| 35 | ملاحظات المراجعة | reviewNotes | String (Text) | لا | ملاحظات المراجع على اللعبة | نص حر |
| 36 | سجل المراجعات | reviewLogs | Relation[] | لا | علاقة مع سجل المراجعات | يتم إنشاؤها تلقائياً |

## الجداول المرتبطة

### جدول Country (الدول)
| الحقل | النوع | الوصف |
|-------|-------|--------|
| id | String (CUID) | معرف فريد |
| name | String | الاسم العربي الرسمي |
| isoCode | String | رمز ISO للدولة |
| region | String | المنطقة الجغرافية |
| description | String (Text) | وصف الدولة |

### جدول HeritageField (مجالات التراث)
| الحقل | النوع | الوصف |
|-------|-------|--------|
| id | String (CUID) | معرف فريد |
| name | String | التصنيف العربي (مواءمة مع اليونسكو) |
| description | String (Text) | وصف المجال |
| category | String | الفئة الرئيسية |

### جدول Tag (الوسوم)
| الحقل | النوع | الوصف |
|-------|-------|--------|
| id | String (CUID) | معرف فريد |
| name | String | اسم الوسم بالعربية |
| description | String (Text) | وصف الوسم |
| category | String | فئة الوسم |

### جدول Media (الوسائط)
| الحقل | النوع | الوصف |
|-------|-------|--------|
| id | String (CUID) | معرف فريد |
| gameId | String | معرف اللعبة المرتبطة |
| url | String | رابط الوسائط |
| caption | String (Text) | تعليق على الوسائط |
| source | String (Text) | مصدر الوسائط |
| type | Enum (MediaType) | نوع الوسائط (صورة، فيديو، صوت، وثيقة) |
| width | Int | العرض بالبكسل |
| height | Int | الارتفاع بالبكسل |
| fileSize | Int | الحجم بالبايت |
| mimeType | String | نوع MIME |
| createdAt | DateTime | تاريخ الرفع |

### جدول Reference (المراجع)
| الحقل | النوع | الوصف |
|-------|-------|--------|
| id | String (CUID) | معرف فريد |
| gameId | String | معرف اللعبة المرتبطة |
| citation | String (Text) | الاقتباس الكامل بالعربية |
| sourceType | String | نوع المصدر (كتاب، دراسة، موقع) |
| author | String | المؤلف |
| year | Int | سنة النشر |
| publisher | String | الناشر |
| url | String | رابط المصدر |
| accessedAt | DateTime | تاريخ الوصول |

## صيغ الاستيراد الدقيق

### 1. صيغة CSV للاستيراد السريع (مباشر إلى قاعدة البيانات)
```csv
canonicalName,localNames,slug,countryId,region,gameType,ageGroup,practitioners,playersCount,tools,environment,timing,description,rules,winLossSystem,startEndMechanism,oralTradition,socialContext,reviewStatus
"الركض بالحاجبين المرفوعين","سباق المبهّتين,لعبة العيون الكبار","الركض-بالحاجبين-المرفوعين","country_id_here","الفرجان القديمة","فكاهة / حركية","9 - 12 سنة","مختلط","3 - 10 لاعبين","لا يوجد (الجسد فقط)","السكيك (الأزقة)","النهار (العصر)","وصف اللعبة...","قاعدة 1|قاعدة 2|قاعدة 3","نظام الفوز...","آلية البدء...","صيحات...","سياق اجتماعي...","draft"
```

### 2. صيغة النص المنظم للاستيراد الذكي (يدعم التنسيق العربي)
```
اسم اللعبة: إِرْمِ إِلْتِرْمي (القرعة)
المسميات المحلية: التسييف
الدولة: الجمهورية العراقية
الإقليم: ساحات المدارس والكتاتيب والحارات الشعبية في عموم العراق
مجال التراث: الممارسات الاجتماعية والطقوس (آلية اقتراع وفض نزاع)
نوع اللعبة: قرعة / تحكيم / آلية اختيار / تنظيمية
تاجات التصنيف: #تراث_عراقي، #ألعاب_فتيان، #قرعة_شعبية، #آلية_تحكيم، #موروث_شفهي
الفئة العمرية: الفتيان (الصبيان)
وصف الفئة العمرية: تخص "الأساتذة" بشكل خاص، وهم رؤساء الفرق أو أمهر اللاعبين الذين يملكون حق الاختيار والقيادة.
الممارسون: ذكور
وصف الممارسين: تلعب حصراً بين قادة الفرق (الأساتذة) لضمان العدالة في بدء اللعب، بوجود حكم محايد.
عدد اللاعبين: 3 أشخاص عادة (رئيسا الفريقين + حكم محايد)
وصف اللاعبين: تتكون من طرفين متنافسين (الأستاذين) وطرف ثالث محايد يقوم بدور "الحكَم الأعمى".
الأدوات: الجسد فقط (اليدين والذراعين - حركات القبض والبسط).
المكان: أي مكان تقام فيه المباراة الأصلية (ساحات، مدارس، حارات).
الوقت: قبل بدء المباريات مباشرة (لحظة التأسيس).
الوصف الموسع: [وصف مفصل للعبة...]
قواعد اللعب: 
- يجب أن يكون الاتفاق واختيار اليد بين الرئيسين همساً تاماً حتى لا يسمع الفتى المحايد فيتحيز.
- يولّي الفتى المحايد ظهره للمتنافسين أو يقف بعيداً ويرفع يديه عالياً جداً (وضعية التسييف).
- عند سماع أمر "إرمِ إلترمي" يجب على الفتى خفض إحدى يديه فوراً وبشكل عشوائي.
- مطابقة اليد المختارة لحركة الفتى تعني الفوز بالقرعة والحصول على حق البداية.
- في حال عدم وجود فتى ثالث يقوم أحد "الأساتذة" بمد يديه ويمسك الخصم بإحداهما ليختارها.
نظام الفوز والخسارة:
الفوز: من تطابق خياره مع حركة يد الحكم يحصل على "أحقية البداية" أو "اختيار أول لاعب للفريق".
الخسارة: الطرف الآخر يرضخ لنتيجة القرعة وينتظر دوره.
آلية البدء والانتهاء:
البدء: عند اختلاف الفريقين على من يبدأ اللعب، يتم استدعاء الحكم ورفع الأيادي.
الانتهاء: تسقط إحدى اليدين، يُعلن الفائز بالقرعة، وتبدأ اللعبة الأساسية فوراً.
الموروث الشفهي:
"الأستاذ": لقب كابتن الفريق أو اللاعب المحترف.
"التسييف": تشبيه اليد المبسوطة المرفوعة بالسيف المشهر.
"إرمِ إلترمي": جملة إيقاعية تعني (ارمِ ما قُدِّر لك أن ترميه) وهي إشارة الحسم.
السياق الاجتماعي:
1. ترسيخ قيم العدالة والنزاهة والرضا بالنتيجة.
2. تعلم اللجوء إلى "طرف ثالث" أو "الحظ" كحل سلمي لمنع الشجار.
3. تعزيز مفهوم القيادة (الأستاذ) واحترام الاتفاقات المبرمة همساً (كلمة الشرف).
المراجع: كتاب "الألعاب الشعبية لفتيان العراق" - عبد الرزاق الحسني (إصدارات هنداوي).
```

### 2. صيغة JSON للاستيراد المنظم
```json
{
  "canonicalName": "الركض بالحاجبين المرفوعين",
  "localNames": ["سباق المبهّتين", "لعبة العيون الكبار"],
  "slug": "الركض-بالحاجبين-المرفوعين",
  "countryId": "country_id_here",
  "region": "الفرجان القديمة",
  "gameType": "فكاهة / حركية",
  "ageGroup": "9 - 12 سنة",
  "practitioners": "مختلط",
  "playersCount": "3 - 10 لاعبين",
  "tools": ["لا يوجد (الجسد فقط)"],
  "environment": "السكيك (الأزقة)",
  "timing": "النهار (العصر)",
  "description": "وصف اللعبة...",
  "rules": ["قاعدة 1", "قاعدة 2", "قاعدة 3"],
  "winLossSystem": "نظام الفوز...",
  "startEndMechanism": "آلية البدء...",
  "oralTradition": "صيحات...",
  "socialContext": "سياق اجتماعي...",
  "reviewStatus": "draft"
}
```

### 3. تحويل النص المنظم إلى بيانات قاعدة البيانات

عند استيراد النص المنظم، يتم تحويله تلقائياً إلى تنسيق قاعدة البيانات كما يلي:

| الحقل في النص | الحقل في قاعدة البيانات | عملية التحويل |
|---------------|--------------------------|----------------|
| اسم اللعبة | canonicalName | نقل مباشر |
| المسميات المحلية | localNames | تقسيم على الفواصل (، أو ,) |
| الدولة | countryId | البحث عن الدولة بالاسم في جدول Countries |
| الإقليم | region | نقل مباشر |
| مجال التراث | heritageFieldId | البحث عن مجال التراث بالاسم في جدول HeritageFields |
| تاجات التصنيف | tags | استخراج الوسوم وإنشاء علاقات مع جدول Tags |
| الفئة العمرية | ageGroup | نقل مباشر |
| الممارسون | practitioners | نقل مباشر |
| عدد اللاعبين | playersCount | نقل مباشر |
| الأدوات | tools | تقسيم على الفواصل (، أو ,) |
| المكان | environment | نقل مباشر |
| الوقت | timing | نقل مباشر |
| الوصف الموسع | description | نقل مباشر |
| قواعد اللعب | rules | تقسيم إلى مصفوفة بناءً على الشرطات أو الأسطر |
| نظام الفوز والخسارة | winLossSystem | نقل مباشر |
| آلية البدء والانتهاء | startEndMechanism | نقل مباشر |
| الموروث الشفهي | oralTradition | نقل مباشر |
| السياق الاجتماعي | socialContext | نقل مباشر |
| المراجع | references | إنشاء سجلات في جدول References |

### 4. قواعد التحقق من البيانات
1. **الاسم الأساسي**: لا يمكن أن يكون فارغاً، يجب أن يحتوي على حروف عربية
2. **الرابط الثابت**: يجب أن يكون فريداً، يحتوي على حروف صغيرة وأرقام وشرطات فقط
3. **معرف الدولة**: يجب أن يشير إلى سجل موجود في جدول الدول
4. **معرف مجال التراث**: يجب أن يشير إلى سجل موجود في جدول مجالات التراث
5. **القواعد**: يجب أن تحتوي على قاعدتين على الأقل
6. **الوصف**: يجب أن يكون طوله 100 حرف على الأقل
7. **حالة المراجعة**: يجب أن تكون واحدة من القيم المسموحة

## نموذج بيانات للوحة التحكم

يجب أن تعرض لوحة التحكم جميع الحقول التالية لكل لعبة:

1. **المعلومات الأساسية**: الاسم الأساسي، الأسماء المحلية، الرابط الثابت
2. **المعلومات الجغرافية**: الدولة، المنطقة، الإحداثيات
3. **التصنيف**: نوع اللعبة، مجال التراث، الفئة العمرية، الممارسون، عدد اللاعبين
4. **المتطلبات**: الأدوات، البيئة، التوقيت
5. **المحتوى**: الوصف، القواعد، نظام الفوز، آلية البدء، التقليد الشفهي، السياق الاجتماعي
6. **حالة العمل**: حالة المراجعة، تاريخ الإنشاء، تاريخ التحديث، تاريخ النشر
7. **المسؤولية**: المساهم، المراجع، ملاحظات المراجعة

تم تحديث هذا الجدول في: 2026-01-29