# ุฅุตูุงุญ ูุดููุฉ ุญูุธ ุงูุฃูุนุงุจ ูู ูุณู "ุฅุถุงูุฉ ูุนุจุฉ ุฌุฏูุฏุฉ"

## ๐ ููุฎุต ุงููุดููุฉ

ูุงูุช ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ุฃู ุฏุงูุฉ `handleSubmit()` ูู ุตูุญุฉ ุฅุถุงูุฉ ูุนุจุฉ ุฌุฏูุฏุฉ ูุง ุชุณุชุฏุนู ุฃู ุฏุงูุฉ ุฎุงุฏู (server action) ูุญูุธ ุงููุนุจุฉุ ุจู ูุงูุช ุชูุชูู ููุท ุจุนุฑุถ ุฑุณุงูุฉ ุชูุจูู ูุฅุนุงุฏุฉ ุงูุชูุฌูู ุฏูู ุญูุธ ุฃู ุจูุงูุงุช.

## โ ุงูุฅุตูุงุญุงุช ุงููููุฐุฉ

### 1. ุฅูุดุงุก ุฏูุงู ูุณุงุนุฏุฉ (Helper Functions)

ุชู ุฅูุดุงุก ููู `lib/actions/helpers.ts` ูุญุชูู ุนูู:

- `getCountryIdByName()`: ููุญุตูู ุนูู ูุนุฑู ุงูุฏููุฉ ูู ุงุณููุง
- `getOrCreateHeritageFieldId()`: ููุญุตูู ุนูู ูุนุฑู ูุฌุงู ุงูุชุฑุงุซ ุฃู ุฅูุดุงุคู
- `getOrCreateTagIds()`: ููุญุตูู ุนูู ูุนุฑูุงุช ุงููุณูู ุฃู ุฅูุดุงุคูุง
- `getAllCountries()`: ููุญุตูู ุนูู ุฌููุน ุงูุฏูู
- `getAllHeritageFields()`: ููุญุตูู ุนูู ุฌููุน ูุฌุงูุงุช ุงูุชุฑุงุซ
- `getAllTags()`: ููุญุตูู ุนูู ุฌููุน ุงููุณูู

### 2. ุฅุถุงูุฉ ุญูู ููุน ุงููุนุจุฉ (gameType)

ุชู ุฅุถุงูุฉ ุญูู `gameType` ุฅูู:
- ูููุฐุฌ ุงูุจูุงูุงุช (formData) ูู ุงูุฎุทูุฉ 1
- ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุน ูุงุฆูุฉ ููุณุฏูุฉ ููุงุฎุชูุงุฑ ูู ุจูู:
  - ุฃูุนุงุจ ุดุนุจูุฉ
  - ุฃูุนุงุจ ุญุฑููุฉ
  - ุฃูุนุงุจ ุฐูููุฉ
  - ุฃูุนุงุจ ุทุฑููุฉ
  - ุฃูุนุงุจ ุจุญุฑูุฉ
  - ุฃูุนุงุจ ุชูููุฏูุฉ

### 3. ุชุญุฏูุซ ุฏุงูุฉ handleSubmit

ุชู ุชุญุฏูุซ ุฏุงูุฉ `handleSubmit()` ูุชููู ุจู:

1. **ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช**: ุงุณุชุฎุฏุงู `validateGameData()` ููุชุญูู ูู ุฌููุน ุงูุญููู
2. **ุงูุญุตูู ุนูู ุงููุนุฑูุงุช**: 
   - ูุนุฑู ุงูุฏููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ูุนุฑู ูุฌุงู ุงูุชุฑุงุซ (ุฃู ุฅูุดุงุคู ุฅุฐุง ูู ููู ููุฌูุฏุงู)
   - ูุนุฑูุงุช ุงููุณูู (ุฃู ุฅูุดุงุคูุง ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ)
3. **ุชุญููู ุงูุจูุงูุงุช**: ุชุญููู ุจูุงูุงุช ุงููููุฐุฌ ุฅูู `FormData` ุจุงูุดูู ุงูุตุญูุญ
4. **ุงุณุชุฏุนุงุก ุงูุฎุงุฏู**: ุงุณุชุฏุนุงุก ุฏุงูุฉ `createGame()` ุงููุนููุฉ
5. **ูุนุงูุฌุฉ ุงููุชูุฌุฉ**: ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ ุฃู ุฎุทุฃ ููุตูุฉ

### 4. ุชุทุงุจู ุงูุญููู

ุชู ุชุทุงุจู ุญููู ุงููููุฐุฌ ูุน ูุชุทูุจุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช:

| ุญูู ุงููููุฐุฌ | ุญูู ูุงุนุฏุฉ ุงูุจูุงูุงุช | ุงูุญุงูุฉ |
|-------------|-------------------|---------|
| name | canonicalName | โ ูุชุทุงุจู |
| country | countryId | โ ูุชู ุงูุญุตูู ุนูู ุงููุนุฑู |
| heritageField | heritageFieldId | โ ูุชู ุงูุญุตูู ุนูู ุงููุนุฑู |
| players | playersCount | โ ูุชุทุงุจู |
| winLoss | winLossSystem | โ ูุชุทุงุจู |
| startEnd | startEndMechanism | โ ูุชุทุงุจู |
| tags | tagIds | โ ูุชู ุงูุญุตูู ุนูู ุงููุนุฑูุงุช |
| gameType | gameType | โ ุชู ุฅุถุงูุชู |

## ๐ ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุชุฃูุฏ ูู ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ุชุฃูุฏ ูู ุฃู PostgreSQL ูุนูู
# ุชุฃูุฏ ูู ุฃู ููู .env ูุญุชูู ุนูู DATABASE_URL

# ุชุดุบูู migrations
npx prisma migrate dev

# ุชุนุจุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงูุจูุงูุงุช ุงูุฃูููุฉ
npx prisma db seed
```

### 2. ุชุดุบูู ุงูุฎุงุฏู

```bash
npm run dev
```

### 3. ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ูุนุจุฉ

1. ุงูุชุญ ุงููุชุตูุญ ุนูู `http://localhost:3000`
2. ุณุฌู ุงูุฏุฎูู (ุฃู ุฃูุดุฆ ุญุณุงุจ)
3. ุงูุชูู ุฅูู "ุฅุถุงูุฉ ูุนุจุฉ ุฌุฏูุฏุฉ"
4. ุงููุฃ ุงูุญููู ุงููุทููุจุฉ:
   - **ุงุณู ุงููุนุจุฉ**: ูุซุงู "ุงูุฑูุถ ุจุงูุญุงุฌุจูู ุงููุฑููุนูู"
   - **ุงูุฏููุฉ**: ุงุฎุชุฑ ูู ุงููุงุฆูุฉ
   - **ููุน ุงููุนุจุฉ**: ุงุฎุชุฑ ูู ุงููุงุฆูุฉ
   - **ุงููุตู**: ุนูู ุงูุฃูู 50 ุญุฑู
   - **ููุงุนุฏ ุงููุนุจ**: ุนูู ุงูุฃูู ูุงุนุฏุฉ ูุงุญุฏุฉ (10 ุฃุญุฑู ุนูู ุงูุฃูู)
5. ุงููุฑ ุนูู "ุญูุธ ูุฅุฑุณุงู ูููุฑุงุฌุนุฉ"
6. ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ ูุฅุนุงุฏุฉ ุชูุฌูู ุฅูู ุตูุญุฉ ุงูุฃูุนุงุจ

### 4. ุงูุชุญูู ูู ุญูุธ ุงููุนุจุฉ

```bash
# ุงูุชุญ Prisma Studio ููุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช
npx prisma studio
```

ุฃู ุงุณุชุฎุฏู SQL ูุจุงุดุฑุฉ:

```sql
SELECT * FROM "Game" ORDER BY "createdAt" DESC LIMIT 1;
```

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. ุงูุจูุงูุงุช ุงููุทููุจุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

ูุฌุจ ุฃู ุชุญุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูู:
- **ุงูุฏูู**: ูุชู ุฅูุดุงุคูุง ุนูุฏ ุชุดุบูู `prisma db seed`
- **ูุฌุงูุงุช ุงูุชุฑุงุซ**: ูุชู ุฅูุดุงุคูุง ุชููุงุฆูุงู ุนูุฏ ุงูุญุงุฌุฉ
- **ุงููุณูู**: ูุชู ุฅูุดุงุคูุง ุชููุงุฆูุงู ุนูุฏ ุงูุญุงุฌุฉ
- **ูุณุชุฎุฏู ูุณุฌู**: ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ูุฅุถุงูุฉ ูุนุจุฉ

### 2. ุงูุญููู ุงููุทููุจุฉ

ุงูุญููู ุงูุชุงููุฉ **ูุทููุจุฉ** ููุง ูููู ุญูุธ ุงููุนุจุฉ ุจุฏูููุง:
- ุงุณู ุงููุนุจุฉ (3-200 ุญุฑู)
- ุงูุฏููุฉ
- ููุน ุงููุนุจุฉ
- ุงููุตู (50-5000 ุญุฑู)
- ูุงุนุฏุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู (10-1000 ุญุฑู ููู ูุงุนุฏุฉ)

### 3. ุญุงูุฉ ุงููุนุจุฉ ุจุนุฏ ุงูุญูุธ

- ูุชู ุญูุธ ุงููุนุจุฉ ุจุญุงูุฉ **ูุณูุฏุฉ** (draft)
- ูููู ูููุฑุงุฌุน ูุดุฑูุง ูุงุญูุงู ูู ูุณู "ุงููุฑุงุฌุนุฉ"
- ูุชู ุญูุธ ุณุฌู ุงููุฑุงุฌุนุฉ (ReviewLog) ุชููุงุฆูุงู

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "ุบูุฑ ูุตุฑุญ ุจุงููุตูู"
**ุงูุญู**: ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู

### ุฎุทุฃ: "ูุฑุฌู ุงุฎุชูุงุฑ ุฏููุฉ ุตุญูุญุฉ"
**ุงูุญู**: ุชุฃูุฏ ูู ุชุดุบูู `prisma db seed` ูุชุนุจุฆุฉ ุฌุฏูู ุงูุฏูู

### ุฎุทุฃ: "ูุนุฑู ูุฌุงู ุงูุชุฑุงุซ ุบูุฑ ุตุงูุญ"
**ุงูุญู**: ุงูุฏุงูุฉ ุงููุณุงุนุฏุฉ ุชูุดุฆ ุงููุฌุงู ุชููุงุฆูุงูุ ุชุญูู ูู ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฎุทุฃ: "ุจูุงูุงุช ุบูุฑ ุตุงูุญุฉ"
**ุงูุญู**: ุชุญูู ูู ุงูุญููู ุงููุทููุจุฉ ูุงูุญุฏ ุงูุฃุฏูู/ุงูุฃูุตู ููุฃุญุฑู

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

1. `app/dashboard/games/new/page.tsx`
   - ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ `createGame` ู `getCountryIdByName` ูุบูุฑูุง
   - ุฅุถุงูุฉ ุญูู `gameType` ูููููุฐุฌ
   - ุชุญุฏูุซ ุฏุงูุฉ `handleSubmit` ุจุงููุงูู

2. `lib/actions/helpers.ts` (ุฌุฏูุฏ)
   - ุฏูุงู ูุณุงุนุฏุฉ ููุญุตูู ุนูู ุงููุนุฑูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

3. `lib/actions/game.ts` (ููุฌูุฏ ูุณุจูุงู)
   - ูุญุชูู ุนูู ุฏุงูุฉ `createGame` ุงูุชู ูุชู ุงุณุชุฏุนุงุคูุง ุงูุขู

## โจ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ ุงูููุชุฑุญุฉ

1. **ุชุญููู ุงูุฏูู ุฏููุงููููุงู**: ุจุฏูุงู ูู ุงุณุชุฎุฏุงู ุซุงุจุช `ARAB_COUNTRIES`ุ ูููู ุชุญููู ุงูุฏูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **ุงูุชุฑุงุญุงุช ุชููุงุฆูุฉ**: ุฅุถุงูุฉ autocomplete ููุฌุงูุงุช ุงูุชุฑุงุซ ูุงููุณูู
3. **ูุนุงููุฉ ูุจู ุงูุญูุธ**: ุฅุถุงูุฉ ุฎุทูุฉ ูุนุงููุฉ ูุจู ุงูุญูุธ ุงูููุงุฆู
4. **ุญูุธ ุชููุงุฆู**: ุญูุธ ุงููุณูุฏุฉ ุชููุงุฆูุงู ูู ูุชุฑุฉ ุฒูููุฉ
5. **ุฑูุน ุงูุตูุฑ**: ุชุญุณูู ุชุฌุฑุจุฉ ุฑูุน ุงูุตูุฑ ูุน ูุนุงููุฉ ูุจุงุดุฑุฉ

## ๐ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ุงููุดููุฉ ุจูุฌุงุญ! ุงูุขู ุนูุฏ ุฅุถุงูุฉ ูุนุจุฉ ุฌุฏูุฏุฉ:
- โ ูุชู ุงุณุชุฏุนุงุก ุฏุงูุฉ `createGame()` ุงููุนููุฉ
- โ ูุชู ุญูุธ ุงูุฃูุนุงุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ูุนูู ูุธุงู ุงูุชูุซูู ุงูุฃุฑุดููู ููุง ูู ูุฎุทุท ูู
- โ ุชุชุทุงุจู ุฌููุน ุงูุญููู ูุน ูุชุทูุจุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
