# ุฅุตูุงุญ ุณุฑูุน - ุงูุชุฑุญููุงุช ูุงูุจูุฆุฉ
# Quick Fix - Migrations and Environment

## โ ุชู ุฅุตูุงุญ ุงููุดุงูู

### 1. ูุดููุฉ ุชูุณูู SQL
**ุงููุดููุฉ:** ูุงู ุงูุณูุฑูุจุช ููุณู ุงูุฏูุงู ุงูุชู ุชุณุชุฎุฏู `$$` ุจุดูู ุฎุงุทุฆ.

**ุงูุญู:** ุชู ุชุญุฏูุซ `scripts/run-migrations.js` ููุนุงูุฌุฉ ุงูุฏูุงู ุจุดูู ุตุญูุญ.

### 2. ูุดููุฉ ุงูููุงุฑุณ ูุน WHERE
**ุงููุดููุฉ:** PostgreSQL ูุชุทูุจ ุฃู ุชููู ุงูุฏูุงู ูู `WHERE` ูุญุฏุฏุฉ ูู `IMMUTABLE`.

**ุงูุญู:** ุชู ุชุจุณูุท ุงูููุงุฑุณ ูุฅุฒุงูุฉ ุงูุดุฑูุท ุงูุชู ุชุณุชุฎุฏู ุฏูุงู ุบูุฑ ุซุงุจุชุฉ:
- `idx_game_published_date` - ุฅุฒุงูุฉ `WHERE` ูุน `reviewStatus`
- `idx_session_active` - ุฅุฒุงูุฉ `WHERE` ูุน `NOW()`

### 3. ูุดููุฉ SESSION_SECRET
**ุงููุดููุฉ:** `SESSION_SECRET` ููููุฏ ูู `.env`.

**ุงูุญู:** ุฃุถู ุงูุณุทุฑ ุงูุชุงูู ุฅูู `.env`:

```env
SESSION_SECRET=718e9ead39c7ec95a81f5758042e93360bb013acfd0f33d103c569d858860eed
```

ุฃู ุฃูุดุฆ ูุงุญุฏุงู ุฌุฏูุฏุงู:
```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. ุฅุถุงูุฉ SESSION_SECRET
ุงูุชุญ `.env` ูุฃุถู:
```env
SESSION_SECRET=718e9ead39c7ec95a81f5758042e93360bb013acfd0f33d103c569d858860eed
```

### 2. ุชุทุจูู ุงูุชุฑุญููุงุช
```bash
npm run db:migrate:run
```

### 3. ุงูุชุญูู ูู ุงููุฌุงุญ
```bash
npm run verify:enhancements
```

---

## ๐ ููุงุญุธุงุช

- `SESSION_SECRET` ูุฌุจ ุฃู ูููู 32 ุญุฑูุงู ุนูู ุงูุฃูู
- ูุง ุชุดุงุฑู `SESSION_SECRET` ูู Git
- ูู ุงูุฅูุชุงุฌุ ุงุณุชุฎุฏู ุณุฑุงู ูุฎุชููุงู

---

## โ ูุชููุน ุจุนุฏ ุงูุฅุตูุงุญ

```bash
npm run db:migrate:run
# โ ูุฌุญ: XX ุฃูุฑ
# ๐ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช...
# ๐ ุงูุชููุช ุฌููุน ุงูุชุฑุญููุงุช ุจูุฌุงุญ!

npm run verify:enhancements
# โ ูุฌุญ: 30
# โ ูุดู: 0
# โ๏ธ  ุชุญุฐูุฑุงุช: 4 (ุงุฎุชูุงุฑูุฉ)
# โ ุงูุชุญูู ูุฌุญ - ุฌููุน ุงูุชุญุณููุงุช ูุทุจูุฉ ุจุดูู ุตุญูุญ!
```
